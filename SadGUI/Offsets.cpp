#include "Offsets.h"


int Offsets::CheckGameVersion() {
	uintptr_t VersionCheck = (uintptr_t)(Misc::Imagebase + 0x100C); 
	int GameVersionID = 0;
	GameVersionID = *(int*)(VersionCheck);
	if (GameVersionID == 136548328) {
		const char* GameVersion = "Ubisoft";
		return 1;
	}
	if (GameVersionID == 238247912) {
		const char* GameVersion = "Steam";
		return 2;
	}
	if (GameVersionID == -645183486) {
		const char* GameVersion = "Asia";
		return 3;
	}
	if (GameVersionID == -858993460) {
		const char* GameVersion = "CompleteEdition";
		return 4;
	}
	return 0;
}

bool Offsets::Initialize() {
	int GameVersion = CheckGameVersion();
	if (GameVersion == 0)
		return false;
	if (GameVersion == 1) {
		CFelonySystem = 0x3BBB5F0;
		EnableFelonySystem = 0x144FFD0;
		UpdateSkeletons = 0x372D80;
		PostPartRecoil = 0x364440;
		SetWaypoint = 0x17D7590;
		UpdatePlayerPawn = 0x1B0AFE0;
		MouseSensitivity = 0x3B8BF20;
		LoadCameraContext = 0x176AE70;
		ProcessMouseSmoothing = 0x15EC6C0;
		ProcessMouseInput = 0x179BB60;
		UpdateCamera = 0x7935F0;
		LoadMissionData = 0x10BB2F0;
		ExecuteFrameJob = 0x467E60;
		PushPlayerActionMap = 0x694CD0;
		ProccessDepthOfField = 0x436DB0;
		PostFXDepthOfField = 0x36B9040;
		GetSceneObjectHandle = 0x25AEA10;
		DepthOfFieldCondition = 0x45E42C;
		SetEntityRotation = 0x11EB7A0;
		SetEntityPosition = 0x11EB4D0;
		GetEntityPosition = 0x11EB1B0;
		RequestDominoAnimationState = 0x11EFED0;
		ActivateInvincibility = 0x11F1680;
		RemoveInvincibility = 0x11F16F0;
		ChangeGraphicKitModel = 0x6D1CB0;
		SetPhysicsEnabled = 0x11F4920;
		AgentDrawWeapon = 0x11E9560;
		PlayerActiveScriptMaskControl = 0x11F45E0;
		PlayerIdHelpers = 0x3B78508;
		SendDamageToEntity = 0x11F0D10;
		SpawnEntityFromArcheType = 0x6D1AA0;
		RemoveEntity = 0x780F40;
		EntitySystem = 0x3B7B3D0;
		StartEntityHighlight = 0x1037820;
		StopEntityHighlight = 0x10378A0;
		GetCurrentVehicleEntityId = 0x11F1100;
		SetScriptedTimeOfDay = 0xA12AF0;
		BeginEnvironmentEvent = 0xA3A0D0;
		CEnvironmentEventsManager = 0x3B890D8;
		CDynamicEnvironmentManager = 0x3B89228;
		ApplySceneParticlePostFx = 0x39BCB0;
		FileOpen = 0xC7700;
		FileClose = 0xB9130;
		FileOpenFromPathId = 0xC7BA0;
		CFileManager = 0x3B441C0;
		GridShadingManager = 0x3BA2760;
		GridShadingOnPause = 0xD84F42;
		SetGridShading = 0xD77DF0;
		BuildNomadString = 0xD5FB0;
		UpdateAnimations = 0x2F17368;
		LoadingState = 0x3B915E0;
		GetMinStepTime = 0x148B40;
		SendShowOrHideAllUIEvent = 0x106B240;
		GetCRCFromString = 0x2080;
		CPhysWorld = 0x3B593F0;
		InputListener = 0x8FC2F0;
		GPSConfigInit = 0xCF3350;
		OnlineState = 0x3B7A0B0;
		CResourceManager = 0x3B593C0;
		LoadDep = 0x1557A0;
		RenderConfig = 0x3B6DD30;
		//PostAnimUpdateWrapper = 0xFDDE00;
		////UnkRoutineWrapper = 0x803D90;
		//UnkRoutineWrapper = 0x9CD900;
		PostAnimUpdate = 0xEBF510;
		GetBulletsInClip = 0xD95880;
		UpdateWeaponStatus = 0x184EF10;
		HasItemInMainHand = 0xC36EF0;
		GetEquippedWeaponGrip = 0xC8B2B0;
		WeaponMechanicComponent = 0x3B99E38;
		PopPlayerActionMap = 0x694D30;
		GetNumberOfPlayers = 0x10BBE90;
		StopPlayerAnimation = 250;
		ResumePlayerAnimation = 208;
		UpdateMouseCameraLook = 0x163C8B0;
		UpdatePlayerLook = 0x16E643B;
		ForceDOF = 128;
		ReleaseDOF = 132;
	} 
	if (GameVersion == 2) {
		CFelonySystem = 0x3BF4850;
		EnableFelonySystem = 0x15A06D0;
		UpdateSkeletons = 0x1495140;
		PostPartRecoil = 0x8FADC0;
		SetWaypoint = 0x1926950;
		UpdatePlayerPawn = 0x1C59A00;
		MouseSensitivity = 0x3B72F30;
		LoadCameraContext = 0x18BA870;
		ProcessMouseSmoothing = 0x173CDC0;
		ProcessMouseInput = 0x18EBAF0;
		UpdateCamera = 0x2A1150;
		LoadMissionData = 0x120BF90;
		ExecuteFrameJob = 0x98BDF0;
		PushPlayerActionMap = 0x19AC00;
		ProccessDepthOfField = 0x95B400;
		PostFXDepthOfField = 0x3628F50;
		GetSceneObjectHandle = 0x843770;
		DepthOfFieldCondition = 0x97F8DC;
		SetEntityRotation = 0x133C440;
		SetEntityPosition = 0x133C170;
		GetEntityPosition = 0x133BE50;
		RequestDominoAnimationState = 0x1340B70;
		ActivateInvincibility = 0x1342320;
		RemoveInvincibility = 0x1342390;
		ChangeGraphicKitModel = 0x1D7BE0;
		SetPhysicsEnabled = 0x13455C0;
		AgentDrawWeapon = 0x133A200;
		PlayerActiveScriptMaskControl = 0x1345280;
		PlayerIdHelpers = 0x3B5CAC8;
		SendDamageToEntity = 0x13419B0;
		SpawnEntityFromArcheType = 0x1D79D0;
		RemoveEntity = 0x28EAB0;
		EntitySystem = 0x3B5FDC8;
		StartEntityHighlight = 0x11884C0;
		StopEntityHighlight = 0x1188540;
		GetCurrentVehicleEntityId = 0x1341DA0;
		SetScriptedTimeOfDay = 0x5DA690;
		BeginEnvironmentEvent = 0x601C70;
		CEnvironmentEventsManager = 0x3B6FFD8;
		CDynamicEnvironmentManager = 0x3B70128;
		ApplySceneParticlePostFx = 0x999910;
		FileOpen = 0x128300;
		FileClose = 0x119D30;
		FileOpenFromPathId = 0x1287A0;
		CFileManager = 0x3B453A0;
		GridShadingManager = 0x3BDBA40;
		GridShadingOnPause = 0xED6E62;
		SetGridShading = 0xEC9D10;
		BuildNomadString = 0x136BD0;
		UpdateAnimations = 0x2E8D6E8;
		LoadingState = 0x3B78658;
		GetMinStepTime = 0x45CD80;
		SendShowOrHideAllUIEvent = 0x11BBEE0;
		GetCRCFromString = 0x2070;
		CPhysWorld = 0x3B6A590;
		InputListener = 0x411230;
		GPSConfigInit = 0xE45270;
		OnlineState = 0x3B5EA20;
		CResourceManager = 0x3B6A560;
		LoadDep = 0x4699E0;
		RenderConfig = 0x3B8E0A0;
		//PostAnimUpdateWrapper = 0x112EAA0;
		////UnkRoutineWrapper = 0x3141D0;
		//UnkRoutineWrapper = 0x595690;
		PostAnimUpdate = 0x1011430;
		GetBulletsInClip = 0xEE77A0;
		UpdateWeaponStatus = 0x199D930;
		HasItemInMainHand = 0xD88E10;
		GetEquippedWeaponGrip = 0xDDD1D0;
		WeaponMechanicComponent = 0x3BD3118;
		PopPlayerActionMap = 0x19AC60;
		GetNumberOfPlayers = 0x120CB30;
		StopPlayerAnimation = 138;
		ResumePlayerAnimation = 96;
		UpdateMouseCameraLook = 0x178CFB0;
		UpdatePlayerLook = 0x1836B3B;
		ForceDOF = 128;
		ReleaseDOF = 132;
	}
	if (GameVersion == 3) {
		CFelonySystem = 0x3ABE698;
		EnableFelonySystem = 0x13110D0;
		PostPartRecoil = 0x92D460;
		UpdateSkeletons = 0x945ED0;
		SetWaypoint = 0x138FD10;
		UpdatePlayerPawn = 0x1E37E60;
		MouseSensitivity = 0x3A3F2E8;
		LoadCameraContext = 0x1083190;
		ProcessMouseSmoothing = 0x1049A60;
		ProcessMouseInput = 0x108B630;
		UpdateCamera = 0x2D2170;
		LoadMissionData = 0x13CBD60;
		ExecuteFrameJob = 0x9E4F70;
		PushPlayerActionMap = 0x3234E0;
		ProccessDepthOfField = 0x9AF100;
		PostFXDepthOfField = 0x34F1800;
		GetSceneObjectHandle = 0x7F8710;
		DepthOfFieldCondition = 0x9DAB6E;
		SetEntityRotation = 0x14206F0;
		SetEntityPosition = 0x1420420;
		GetEntityPosition = 0x1420100;
		RequestDominoAnimationState = 0x1424DD0;
		ActivateInvincibility = 0x1426750;
		RemoveInvincibility = 0x14267C0;
		ChangeGraphicKitModel = 0x33D160;
		SetPhysicsEnabled = 0x14299A0;
		AgentDrawWeapon = 0x141E1C0;
		PlayerActiveScriptMaskControl = 0x1429660;
		PlayerIdHelpers = 0x3A2C688;
		SendDamageToEntity = 0x1425C10;
		SpawnEntityFromArcheType = 0x33CF50;
		RemoveEntity = 0x1EB1D0;
		EntitySystem = 0x3A2D738;
		StartEntityHighlight = 0x13BBC00;
		StopEntityHighlight = 0x13BBC80;
		GetCurrentVehicleEntityId = 0x1426000;
		SetScriptedTimeOfDay = 0x65E090;
		BeginEnvironmentEvent = 0x6746A0;
		CEnvironmentEventsManager = 0x3A42600;
		CDynamicEnvironmentManager = 0x3A42890;
		ApplySceneParticlePostFx = 0x9EDE30;
		FileOpen = 0x119690;
		FileClose = 0x10ADF0;
		FileOpenFromPathId = 0x119B30;
		CFileManager = 0x3A14B78;
		GridShadingManager = 0x3A9F920;
		GridShadingOnPause = 0xD757CE;
		SetGridShading = 0x10DDEF0;
		BuildNomadString = 0x127E30;
		UpdateAnimations = 0x2D2F0B0;
		LoadingState = 0x3A42190;
		GetMinStepTime = 0x47C130;
		SendShowOrHideAllUIEvent = 0x13AF200;
		GetCRCFromString = 0x16D640;
		CPhysWorld = 0x3A3B418;
		InputListener = 0x3C4600;
		GPSConfigInit = 0x10CC040;
		OnlineState = 0x3A2CE60;
		CResourceManager = 0x3A3A010;
		LoadDep = 0x461AF0;
		RenderConfig = 0x3A5E1D0;
		//PostAnimUpdateWrapper = 0x1854930;
		////UnkRoutineWrapper = 0x2F8B80;
		//UnkRoutineWrapper = 0x533480;
		PostAnimUpdate = 0x1837710;
		GetBulletsInClip = 0x10E3330;
		UpdateWeaponStatus = 0x1DDC6D0;
		HasItemInMainHand = 0x10AE5C0;
		GetEquippedWeaponGrip = 0x10BCF30;
		WeaponMechanicComponent = 0x3AD17B8;
		PopPlayerActionMap = 0x323540;
		GetNumberOfPlayers = 0x013CC900;
		UpdateMouseCameraLook = 0x105F0D0;
		UpdatePlayerLook = 0x10731EB;
		StopPlayerAnimation = 186;
		ResumePlayerAnimation = 144;
		ForceDOF = 0x70;
		ReleaseDOF = 0x74;
	}
	if (GameVersion == 4) {
		SetWaypoint = 0xD73A10;
		CFelonySystem = 0x3B840D0;
		EnableFelonySystem = 0x9E47C0;
		PostPartRecoil = 0x1D633C0;
		UpdateSkeletons = 0x1D70E70;
		UpdatePlayerPawn = 0x10A8D60;
		MouseSensitivity = 0x3BC94C0;
		LoadCameraContext = 0xD03A40;
		ProcessMouseSmoothing = 0xB80EB0;
		ProcessMouseInput = 0xD36670;
		UpdateCamera = 0x170ED50;
		LoadMissionData = 0x640790;
		ExecuteFrameJob = 0x1DF3980;
		PushPlayerActionMap = 0x1613BE0;
		ProccessDepthOfField = 0x1DC31C0;
		PostFXDepthOfField = 0x363B7A0;
		GetSceneObjectHandle = 0x1C568C0;
		DepthOfFieldCondition = 0x1DE761C;
		SetEntityRotation = 0x770C40;
		SetEntityPosition = 0x770970;
		GetEntityPosition = 0x770650;
		RequestDominoAnimationState = 0x775370;
		ActivateInvincibility = 0x776B20;
		RemoveInvincibility = 0x776B90;
		ChangeGraphicKitModel = 0x1650BC0;
		SetPhysicsEnabled = 0x779DC0;
		AgentDrawWeapon = 0x76EA00;
		PlayerActiveScriptMaskControl = 0x779A80;
		PlayerIdHelpers = 0x3BB69B8;
		SendDamageToEntity = 0x7761B0;
		SpawnEntityFromArcheType = 0x16509B0;
		RemoveEntity = 0x16FCFD0;
		EntitySystem = 0x3BB92C0;
		StartEntityHighlight = 0x5BCCC0;
		StopEntityHighlight = 0x5BCD40;
		GetCurrentVehicleEntityId = 0x7765A0;
		SetScriptedTimeOfDay = 0x1A2E290;
		BeginEnvironmentEvent = 0x1A55870;
		CEnvironmentEventsManager = 0x3BC6CF8;
		CDynamicEnvironmentManager = 0x3BC6E48;
		ApplySceneParticlePostFx = 0x1E02330;
		FileOpen = 0x1280E0;
		FileClose = 0x119B40;
		FileOpenFromPathId = 0x128580;
		CFileManager = 0x3B443A0;
		GridShadingManager = 0x3B694D0;
		GridShadingOnPause = 0x2EBEE2;
		SetGridShading = 0x2DED90;
		BuildNomadString = 0x136950;
		UpdateAnimations = 0x3089DA8;
		LoadingState = 0x3BCDA60;
		GetMinStepTime = 0x18BB2F0;
		SendShowOrHideAllUIEvent = 0x5F06E0;
		GetCRCFromString = 0x2080;
		CPhysWorld = 0x3BC21C0;
		InputListener = 0x1871500;
		GPSConfigInit = 0x25A2F0;
		OnlineState = 0x3BB8210;
		CResourceManager = 0x3BC2190;
		LoadDep = 0x18C7F50;
		RenderConfig = 0x3BE2F60;
		//PostAnimUpdateWrapper = 0x5632A0;
		////UnkRoutineWrapper = 0x177C110;
		//UnkRoutineWrapper = 0x19EC660;
		PostAnimUpdate = 0x4264B0;
		GetBulletsInClip = 0x2FC820;
		UpdateWeaponStatus = 0xDECC90;
		HasItemInMainHand = 0x19DE90;
		GetEquippedWeaponGrip = 0x1F2250;
		WeaponMechanicComponent = 0x3B5E368;
		PopPlayerActionMap = 0x1613C40;
		GetNumberOfPlayers = 0x641330;
		UpdateMouseCameraLook = 0xBD10A0;
		UpdatePlayerLook = 0xC7AC2B;
		StopPlayerAnimation = 186;
		ResumePlayerAnimation = 144;
		ForceDOF = 128;
		ReleaseDOF = 132;
	}
	return true;
}